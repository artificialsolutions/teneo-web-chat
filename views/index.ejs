<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Teneo Web Chat</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0 user-scalable=no">
    <style>
      body {
        background: #E5F5FE;
      }
    </style>
  </head>

  <body>
    <button onclick="TeneoWebChat.call('reset')">Reset Chat</button><br>

    <script>
      const mandalorianIconUrl = 'https://cdn0.iconfinder.com/data/icons/famous-character-vol-1-colored/48/JD-31-512.png'
      const newEndpoint = 'https://gorgeoushuskies-10d959.bots.teneo.ai/web_chat_test_26gbp9h61k8dftrg9pe7r1z6cv/'
      const oldEndpoint = 'https://as-freaky-styley-714c5e.bots.teneo.ai/teneo_web_chat_tes_3gzgctjx5q84x8fztj2bdzxtrh/'
      const agentIconUrl = 'https://cdn0.iconfinder.com/data/icons/streamline-emoji-1/48/092-robot-face-1-512.png'
    </script>
    
    <button onclick="TeneoWebChat.call('set_chat_window_title', 'New Title')">Set Custom Title</button><br><br>

    <button onclick="TeneoWebChat.call('set_chat_window_icon', mandalorianIconUrl)">Set Custom Window icon</button><br>
    <button onclick="TeneoWebChat.call('set_chat_window_icon', '')">Set  Window icon</button><br>
    <button onclick="TeneoWebChat.call('reset_chat_window_icon')">Reset Window icon</button> <br><br>


    <button onclick="TeneoWebChat.call('set_launch_icon', agentIconUrl)">Set Custom Launch icon</button><br>
    <button onclick="TeneoWebChat.call('reset_launch_icon')">Reset Launch icon</button><br><br>


    <button onclick="TeneoWebChat.call('set_chat_window_title', '')">Set blank Title</button><br><br>



    <button onclick="TeneoWebChat.call('set_engine_url', newEndpoint)">Set Engine URL = HUSKIES</button><br>
    <button onclick="TeneoWebChat.call('set_engine_url', oldEndpoint)">Set Engine URL = freaky</button><br>
    <button onclick="TeneoWebChat.call('set_engine_url', '')">Set Engine URL = emtpy</button><br>
    
    <script src="teneo-web-chat.js"></script> <!-- needed for Heroku -->
    <div id="teneo-web-chat"></div>
    <script>
      window.onload = function () {
        if (
          window.TeneoWebChat &&
            typeof window.TeneoWebChat.initialize === 'function'
        ) {
          var element = document.getElementById('teneo-web-chat');

          const teneoProps = {
            'teneoEngineUrl': '<%= process.env.TENEO_ENGINE_URL %>',
            'title':'<%= process.env.HEADER_TITLE %>',
            'titleIconUrl': '<%= process.env.HEADER_ICON_URL %>',
            'showCloseButton' : '<%= process.env.SHOW_CLOSE_BUTTON %>',
            'agentAvatarUrl' : '<%= process.env.AGENT_AVATAR_URL %>',
            'botAvatarUrl' : '<%= process.env.BOT_AVATAR_URL %>',
            'userAvatarUrl' : '<%= process.env.USER_AVATAR_URL %>',
            'minimizeIconUrl' :  '<%= process.env.MINIMIZE_ICON_URL %>',
            'closeIconUrl' :  '<%= process.env.CLOSE_ICON_URL %>',
            'launchIconUrl' :  '<%= process.env.LAUNCH_ICON_URL %>',
          }

          window.TeneoWebChat.on('input_submitted', payload => {
              payload.text = 'Obfuscated text bla bla';
              if (payload.parameters==null){
                payload.parameters = {};
                payload.parameters.obfuscated = 'true';
              }
          });

          window.TeneoWebChat.initialize(element, teneoProps);
        }
      }
    </script>
  </body>
</html>
